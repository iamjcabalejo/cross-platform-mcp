---
description: React component patterns
globs: "**/*.tsx"
alwaysApply: false
---

# React

## Component Structure
- Use functional components and hooks; avoid class components for new code
- Keep components under ~100 lines; extract subcomponents or custom hooks when larger
- Colocate related logic (state, effects) with the component; extract to hooks when reused

## Accessibility
- Ensure every form input has an associated `<label>` (use `htmlFor`/`id` or wrap)
- Use semantic HTML: `<button>` for actions, `<a>` for navigation, headings in order
- Add `data-testid` for elements that need E2E selectors when role/label are insufficient
- Support keyboard navigation; avoid `tabIndex` except to fix focus order

## State & Data
- Prefer server components when no client interactivity is needed
- Use `useState` for local UI state; lift state only when necessary
- Fetch data at the appropriate level; avoid prop drilling—use context or composition

## Performance
- Memoize expensive computations with `useMemo`; memoize callbacks with `useCallback` when passing to memoized children
- Use `React.lazy` and `Suspense` for code-splitting large routes or components
- Avoid inline object/array creation in JSX props (causes unnecessary re-renders)

## Patterns
- Extract reusable UI into small, composable components
- Use compound components or render props for flexible APIs
- Prefer composition over prop drilling; avoid "prop drilling" beyond 2–3 levels
